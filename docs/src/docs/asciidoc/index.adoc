= Master Mind. Solución 18.1. *mvc*
Santa Tecla <parqueNaturalSantaTecla@gmail.com>
:toc-title: Índice
:toc: left

:idprefix:
:idseparator: -
:imagesdir: images

== Requisitos 1. *Básica*

[cols="50,50"]
|===

a|
- link:https://en.wikipedia.org/wiki/Tic-tac-toe[*Wiki*]
* _Funcionalidad: **Básica** + [lime-background]**undo/redo**_
* _Interfaz: **Texto**_
* _Distribución: **Standalone**_
* _Persistencia: **No**_

a|

image::Dibujo.jpg[]

|===

=== Arquitectura

[plantuml,arquitecturaVersion17,svg]
....

package tictactoe.controllers #DDDDDD { } 
tictactoe.controllers .down.> tictactoe.models
tictactoe.controllers .down.> tictactoe.views
tictactoe.controllers .down.> tictactoe.events
tictactoe.controllers .down.> utils

package tictactoe.events #DDDDDD { }
tictactoe.events .down.> utils

package tictactoe.models #DDDDDD { }
package java.util{ }
tictactoe.models .down.> java.util
tictactoe.models .down.> utils
tictactoe.models .down.> tictactoe.events

package utils #DDDDDD { } 
package java.io{ }
utils .down.> java.io

package tictactoe.views #DDDDDD { } 
tictactoe.views .down.> utils
tictactoe.views .down.> tictactoe.models
tictactoe.views .down.> tictactoe.events

....

=== Paquete _tictactoe.views_

[plantuml,tictactoeViewsVersion17,svg]

....

class  tictactoe.views.BoardView{
~ write(): void
~ writeln(): void
}
utils.WithConsoleView <|-down- tictactoe.views.BoardView

class  tictactoe.views.Command{
# ticTacToe: TicTacToe
# Command(String, TicTacToe, Observer)
}
utils.Command <|-down- tictactoe.views.Command

class  tictactoe.views.CoordinateView{
~ read(String): Coordinate
}
utils.WithConsoleView <|-down- tictactoe.views.CoordinateView

class  tictactoe.views.ErrorView{
+ {static} MESSAGES: String[]
# error: Error
+ ErrorView(Error)
~ writeln(): void
}

class  tictactoe.views.GameView{
+ writeSeparator(): void
+ writeVerticalLineLeft(): void
+ writeVerticalLineCentered(): void
+ writeEmpty(): void
+ writeLineBreak(): void
+ writeToken(char): void
+ writeWinner(char): void
}
tictactoe.views.GameView ..> tictactoe.views.MessageView
tictactoe.views.GameView ..> tictactoe.views.BoardView
tictactoe.views.GameView ..> tictactoe.views.ResultView

class  tictactoe.views.Menu{
+ Menu(TicTacToe, Observer)
}
utils.Menu <|-down- tictactoe.views.Menu
tictactoe.views.MovementCommand ..> tictactoe.views.MessageView

enum  tictactoe.views.MessageView{
+ EMPTY: MessageView 
+ SEPARATOR: MessageView
+ VERTICAL_LINE_CENTERED: MessageView
+ VERTICAL_LINE_LEFT: MessageView
+	PLAYER_WIN: MessageView
+	START_GAME: MessageView
+	CHOOSE_PLAYER: MessageView
+	READ_ROW: MessageView
+	READ_COLUMN: MessageView
+	ERROR: MessageView
+ PROPOSE_COMMAND: MessageView
+ UNDO_COMMAND: MessageView
+ REDO_COMMAND: MessageView
+ RESUME: MessageView
- message: String
- MessageView(String)
+ getMessage(): String
}

class  tictactoe.views.MovementCommand{
+ MovementCommand(TicTacToe, Observer)
+ updateIsActive(): void
+ execute(): void
}
tictactoe.views.Command <|-down- tictactoe.views.MovementCommand
tictactoe.views.MovementCommand ..> tictactoe.views.MessageView

class tictactoe.views.RedoCommand{
~ RedoCommand(TicTacToe, Observer)
+ updateIsActive(): void
+ execute(): void
}
tictactoe.views.Command <|-down- tictactoe.views.RedoCommand
tictactoe.views.RedoCommand ..> tictactoe.views.MessageView

class tictactoe.views.ResultView{
~ write(char): void
}
utils.WithConsoleView <|-down- tictactoe.views.ResultView
tictactoe.views.ResultView ..> tictactoe.views.MessageView

class tictactoe.views.ResumeView{
~ read(): boolean
}
tictactoe.views.ResumeView ..> utils.YesNoDialog
tictactoe.views.ResumeView ..> tictactoe.views.MessageView

class tictactoe.views.StartView{
~ write(): void
}
utils.WithConsoleView <|-down- tictactoe.views.StartView
tictactoe.views.StartView ..> tictactoe.views.MessageView

class tictactoe.views.TicTacToeView{
- ticTacToe: TicTacToe
- menu: Menu
+ TicTacToeView(TicTacToe, Observer)
+ write(): void
+ update(Observed, Event): void
- resume(): void
}
utils.Observed <|-down- tictactoe.views.TicTacToeView
utils.Observer <|-down- tictactoe.views.TicTacToeView
tictactoe.views.TicTacToeView ..> tictactoe.views.MessageView
tictactoe.views.TicTacToeView ..> tictactoe.events.OPlayerWinnerEvent
tictactoe.views.TicTacToeView ..> tictactoe.events.XPlayerWinnerEvent
tictactoe.views.TicTacToeView ..> tictactoe.models.TicTacToe
tictactoe.views.TicTacToeView *-down-> tictactoe.views.Menu
tictactoe.views.TicTacToeView ..> utils.YesNoDialog

class tictactoe.views.UndoCommand{
+ UndoCommand(TicTacToe, Observer)
+ updateIsActive(): void
+ execute(): void
}
tictactoe.views.Command <|-down- tictactoe.views.UndoCommand
tictactoe.views.UndoCommand ..> tictactoe.views.MessageView

class  tictactoe.views.UserPlayerView{
+ readCoordinate(String): Coordinate
}
tictactoe.views.UserPlayerView ..> tictactoe.views.CoordinateView

....

=== Paquete _tictactoe.models_

[plantuml,tictactoeModelsVersion17,svg]

....

class  tictactoe.models.Board{
+ {static} EMPTY: char
- coordinates: Coordinate[][]
+ Board()
+ Board(Coordinate[][])
+ getToken(Coordinate): Token
~ move(Coordinate, Coordinate): void
~ put(Coordinate, Token): void
- remove(Coordinate): void
~ isTicTacToe(Token): boolean
- numberOfCoordinates(Coordinate[]): int
~ isCompleted(): boolean
+ isEmpty(Coordinate): boolean
~ isOccupied(Coordinate, Token): boolean
- checkNumberOfCoordinates(Coordinate[]): boolean
- checkDirectionOfFirstCoordinates(Coordinate[]): boolean
- checkDirectionOfAllCoordinates(Coordinate[]): boolean
~ copy(): Board
}
tictactoe.models.Board *-down-> tictactoe.models.Coordinate
tictactoe.models.Board ..> tictactoe.models.Turn
tictactoe.models.Board ..> utils.Direction

class  tictactoe.models.Coordinate{
+ {static} DIMENSION: char
+ Coordinate()
+ Coordinate(int, int)
~ inDirection(Coordinate): boolean
~ getDirection(Coordinate): Direction
- inInverseDiagonal(): boolean
+ isValid(): boolean
+ random(): void
}
utils.Coordinate <|-down- tictactoe.models.Coordinate
tictactoe.models.Coordinate ..> utils.Direction
tictactoe.models.Coordinate ..> java.util.Random

class  tictactoe.models.Game{
- board: Board
- players: Player[][]
- turn: Turn
+ Game()
+ createPlayers(int): void
~ createMemento(): Memento
~ set(Memento): void
- createCopyOfPlayers(Player[], Board): Player[]
+ isBoardComplete(): boolean
+ putTokenPlayerFromTurn(Coordinate): Error
+ moveTokenPlayerFromTurn(Coordinate[]): Error
+ getTypeOfTokenPlayerFromTurn(): PlayerType
+ getPutCoordinateError(Coordinate): Error
+ getMoveOriginCoordinateError(Coordinate): Error
+ getMoveTargetCoordinateError(Coordinate, Coordinate): Error
+ getToken(Coordinate): Token
+ changeTurn(): void
+ isTicTacToe(): boolean
+ getValueFromTurn(): int
+ getCoordinateDimension(): int
+ isEmptyToken(Coordinate): boolean
+ getValueFromTurn(): int
+ getTokenChar(Coordinate): char
}
tictactoe.models.Game *-down-> tictactoe.models.Board
tictactoe.models.Game *-down-> tictactoe.models.Player
tictactoe.models.Game *-down-> tictactoe.models.Turn
tictactoe.models.Game ..> tictactoe.types.Token
tictactoe.models.Game ..> tictactoe.types.PlayerType
tictactoe.models.Game ..> tictactoe.models.Memento

class  tictactoe.models.Memento{
- board: Board
- players: Player[][]
- turn: Turn
+ Memento(Board, Player[], Turn)
+ getBoard(): Board
~ getPlayers(): Player[]
~ getTurn(): Turn
}
tictactoe.models.Memento *-down-> tictactoe.models.Board
tictactoe.models.Memento *-down-> tictactoe.models.Player
tictactoe.models.Memento *-down-> tictactoe.models.Turn

class  tictactoe.models.Player{
- token: Token
- board: Board
- type: PlayerType
+ Player(Token, Board, PlayerType)
+ getType(): PlayerType
~ getToken(): Token
~ put(Coordinate): void
~ move(Coordinate[]): void
+ getPutCoordinateError(Coordinate): Error
+ getMoveOriginCoordinateError(Coordinate): Error
+ getMoveTargetCoordinateError(Coordinate, Coordinate): Error
}
tictactoe.models.Player *-down-> tictactoe.models.Board
tictactoe.models.Player ..> tictactoe.models.Coordinate

class  tictactoe.models.Registry{
- mementoList: ArrayList<Memento>
- game: Game
- firstPrevious: int
~ Registry(Game)
~ registry(): void
~ redo(Game): void
~ undoable(): boolean
~ redoable(): boolean
~ reset(): void
}
tictactoe.models.Registry *-down-> tictactoe.models.Game
tictactoe.models.Registry *-down-> tictactoe.models.Memento
tictactoe.models.Registry *-down-> java.util.ArrayList

class  tictactoe.models.Turn{
+ {static} NUM_PLAYERS: int
- value: int
- players: Player[]
+ Turn(Player[])
+ Turn(Player[], int)
~ change(): void
~ getPlayer(): Player
~ getValue(): int
- getOtherValue(): int
~ getOtherPlayer(): Player
~ copy(Player[]): Turn
}
tictactoe.models.Turn *-down-> tictactoe.models.Player

class  tictactoe.models.TicTacToe{
- game: Game
- registry: Registry
+ TicTacToe(Game)
+ createPlayers(int): void
+ undoable(): boolean
+ redoable(): boolean
+ isTicTacToe(): boolean
+ undo(): void
+ redo(): void
+ registry(): void
+ newGame(): void
}
utils.Observed <|-down- tictactoe.models.TicTacToe
tictactoe.models.TicTacToe *-down-> tictactoe.models.Registry
tictactoe.models.TicTacToe ..> tictactoe.models.Game

....

=== Paquete _tictactoe.controllers_

[plantuml,tictactoeControllersVersion17,svg]

....

class  tictactoe.controllers.GameController{
~ {static} ENTER_COORDINATE_TO_PUT: String
~ {static} ENTER_COORDINATE_TO_REMOVE: String
- gameView: GameView
- game: Game
~ GameController()
~ getGame(): Game
~ doMovement(): void
- isUserPlayerType(): boolean
- readCoordinateToPut(): Coordinate
- generateRandomCoordinate(): Coordinate
- readCoordinateToMove(): Coordinate[]
~ writeBoard(): void
- printRowBoard(int): void
- printSquareBoard(Coordinate): void
}
tictactoe.controllers.GameController *-down-> tictactoe.views.GameView
tictactoe.controllers.GameController *-down-> tictactoe.models.Game
tictactoe.controllers.GameController ..> tictactoe.views.ErrorView
tictactoe.controllers.GameController ..> tictactoe.views.UserPlayerView

class  tictactoe.controllers.StartController{
~ read(): int
}
tictactoe.controllers.StartController ..> tictactoe.views.StartView
tictactoe.controllers.StartController ..> utils.PlayersDialog

class  tictactoe.controllers.TicTacToeController{
- gameController: GameController
- tictactoe: TicTacToe
- tictactoeView: TicTacToeView
~ TicTacToeController()
~ clear(): void
~ play(): void
+ update(Observed, Event): void
+ {static} main(String[]): void
}
utils.Observer <|-down- tictactoe.controllers.TicTacToeController
tictactoe.controllers.TicTacToeController *-down-> tictactoe.controllers.GameController
tictactoe.controllers.TicTacToeController *-down-> tictactoe.models.TicTacToe
tictactoe.controllers.TicTacToeController *-down-> tictactoe.views.TicTacToeView
tictactoe.controllers.TicTacToeController ..> tictactoe.controllers.StartController
tictactoe.controllers.TicTacToeController ..> tictactoe.events.MoveEvent
tictactoe.controllers.TicTacToeController ..> tictactoe.events.UndoEvent
tictactoe.controllers.TicTacToeController ..> tictactoe.events.RedoEvent
tictactoe.controllers.TicTacToeController ..> tictactoe.events.NewGameEvent

....

=== Paquete _tictactoe.events_

[plantuml,tictactoeEvents,svg]

....

class  tictactoe.controllers.MoveEvent{
}
utils.Event <|-down- tictactoe.controllers.MoveEvent

class  tictactoe.controllers.NewGameEvent{
}
utils.Event <|-down- tictactoe.controllers.NewGameEvent

class  tictactoe.controllers.OPlayerWinnerEvent{
}
utils.Event <|-down- tictactoe.controllers.OPlayerWinnerEvent

class  tictactoe.controllers.RedoEvent{
}
utils.Event <|-down- tictactoe.controllers.RedoEvent

class  tictactoe.controllers.UndoEvent{
}
utils.Event <|-down- tictactoe.controllers.UndoEvent

class  tictactoe.controllers.XPlayerWinnerEvent{
}
utils.Event <|-down- tictactoe.controllers.XPlayerWinnerEvent

....

=== Paquete _utils_

[plantuml,utilsVersion17,svg]

....

class  utils.ClosedInterval{
- max: int
- min: int
+ ClosedInterval(int, int)
+ includes(int): boolean
}

class  utils.Command{
# title: String
# isActive: boolean
# {abstract} isActive(): boolean
~ getTitle(): String
+ {abstract} updateIsActive(): void
+ {abstract} execute(): void
}
utils.Observed <|-down- utils.Command

class  utils.Event{
}

class  utils.Console{
- bufferedReader: BufferedReader
+ Console()
+ write(char): void
+ write(String): void
+ readInt(String): int
+ readChar(String): char
+ readString(String): String
+ writeln(int): void
+ writeln(String): void
+ writeln(): void
+ writeError(String): void
}
utils.Console *-down-> java.io.BufferedReader

class  utils.Coordinate{
# row: int
# column: int
# Coordinate()
# Coordinate(int, int)
# getMainDirection(Coordinate): Direction
- inMainDiagonal(): boolean
- inVertical(Coordinate): boolean
- inHorizontal(Coordinate): boolean
+ getRow(): int
+ getColumn(): int
+ hashCode(): int
+ equals(Object): boolean
}
utils.Coordinate ..> utils.Direction

enum  utils.Direction{
  VERTICAL
  HORIZONTAL
  MAIN_DIAGONAL
  INVERSE_DIAGONAL
}

class  utils.Menu{
- {static} OPTION: String
# commands: ArrayList<Command>
+ execute(): void
}
utils.WithConsoleView <|-down- utils.Menu
utils.Menu *-down-> utils.Command
utils.Menu ..> utils.CloseInterval

class  utils.Observed{
- observers: ArrayList<Observer>
+ Observed()
+ addObserver(Observer): void
+ notify(Event): void
}
utils.Observed *-down-> utils.Observer

interface  utils.Observer{
+ update(Observed, Event): void
}

class  utils.PlayersDialog{
- {static} USERS_ERROR: String
+ read(int): int
}
utils.WithConsoleView <|-down- utils.PlayersDialog

class  utils.WithConsoleView{
# console: Console
# WithConsoleView()
}
utils.WithConsoleView *-down-> utils.Console

class  utils.YesNoDialog{
- {static} AFIRMATIVE: char
- {static} NEGATIVE: char
- {static} QUESTION: String
- {static} MESSAGE: String
+ YesNoDialog()
+ read(String): boolean
- {static} isNegative(char): boolean
- {static} isAfirmative(char): boolean
}
utils.WithConsoleView <|-down- utils.YesNoDialog

....

== Vista de Desarrollo/Implementación

[plantuml,diagramaImplementacion,svg]
....

package "  "  as tictactoe {
}
package "  "  as tictactoe.models {
}
package "  "  as tictactoe.controllers {
}
package "  "  as tictactoe.events {
}
package "  "  as tictactoe.views {
}
package "  "  as utils {
}
package "  "  as java.io {
}
package "  "  as java.util {
}

[tictactoe.jar] as jar

jar *--> tictactoe
jar *--> tictactoe.models
jar *--> tictactoe.controllers
jar *--> tictactoe.events
jar *--> tictactoe.views
jar *--> utils
jar *--> java.io
jar *--> java.util
....


== Vista de Despliegue/Física

[plantuml,diagramaDespliegue,svg]
....

node node #DDDDDD [
<b>Personal Computer</b>
----
memory : xxx Mb
cpu : xxx GHz
]

[ tictactoe.jar ] as component

node *--> component
....

== Vista de Procesos

- No hay concurrencia











