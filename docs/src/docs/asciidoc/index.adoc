= Master Mind. Solución 1.1. *domainModel*
Universo Santa Tecla <USantaTecla@gmail.com>
:toc-title: Índice
:toc: left

:idprefix:
:idseparator: -
:imagesdir: images

== Requisitos 1. *Básica*

[cols="50,50"]
|===

a|
- link:https://en.wikipedia.org/wiki/Tic-tac-toe[*Wiki*]
* _Funcionalidad: **Básica**_
* _Interfaz: **Texto**_
* _Distribución: **Standalone**_
* _Persistencia: **No**_

a|

image::Dibujo.jpg[]

|===

== Vista de Lógica/Diseño

- Aplicación del *Modelo del Dominio* mediante Estrategias de *Análisis Formal*, *Análisis Clásico*, *Experto del Dominio*, *Reparto de Responsabilidades*, ...

=== Arquitectura

[plantuml,version1Arquitectura,svg]
....

package usantatecla.tictactoe #DDDDDD { } 
package usantatecla.utils #DDDDDD { } 
package java.util{ }
package java.io{ }

usantatecla.tictactoe .down.> java.util
usantatecla.tictactoe .down.> usantatecla.utils
usantatecla.utils .down.> java.io

....

=== Paquete _tictactoe_

[plantuml,version1TicTacToe,svg]
....

namespace usantatecla.tictactoe {
class Board {
	- {final} int NUMBER_PLAYERS;
	Board(int)
	void write()
	private Token getToken(Coordinate)
	boolean isCompleted() 
	- boolean isCompleted(int) 
	void put(Coordinate, Token) 
	void move(Coordinate, Coordinate) 
	private void remove(Coordinate ) 
	boolean isOccupied(Coordinate, Token)
	boolean isEmpty(Coordinate)
	boolean isTicTacToe(Token) 
}

class Coordinate {
	{static} {final} Coordinate NULL_COORDINATE
	{static} {final} int DIMENSION
	{static} {final} ClosedInterval LIMITS
	Coordinate()
	Coordinate(int, int)
	+ boolean isNull() 
	+ Direction getDirection(usantatecla.utils.Coordinate)
	+ boolean inInverseDiagonal()
	+ void read(String)
	+ void random()
	+ boolean equals(Object)
}

enum Error {

	NOT_EMPTY
	NOT_OWNER
	SAME_COORDINATES
	WRONG_COORDINATES
	NULL_ERROR
	- String message
	Error()
	Error(String)
	void writeln()
}

class MachinePlayer {
	MachinePlayer(Token, Board)
	~ Coordinate getCoordinate(Message)
}

enum Message {
	TITTLE
	NUMBER_PLAYERS
	SEPARATOR
	VERTICAL_LINE_LEFT
	VERTICAL_LINE_CENTERED
	VERTICAL_LINE_RIGHT
	ENTER_COORDINATE_TO_PUT
	ENTER_COORDINATE_TO_REMOVE
	COORDINATE_TO_PUT
	COORDINATE_TO_REMOVE
	COORDINATE_TO_MOVE
	PLAYER_WIN
	RESUME
	NULL_MESSAGE
	- String message
	- Message()
	- Message(String)
	void write() 
	void writeln()
	+ String toString()
}


abstract class Player {
	~ Board board
	~ Token token
	Player(Token, Board)
	void play() 
	- void put()
	~ abstract Coordinate getCoordinate(Message)
	~ Error checkPutCoordinateError(Coordinate)
	- void move()
	~ Error checkMoveOriginCoordinateError(Coordinate)
	~ Error checkMoveTargetCoordinateError(Coordinate, Coordinate)
	void writeWinner() 
	Token getToken()
}

class TicTacToe{
	- void play() 
	- boolean isResumedGame()
	+ static void main(String[])
}

enum Token {
	X_TOKEN
	Y_TOKEN
	NULL_TOKEN
	- char symbol
	- Token(char)
	+ boolean isNull()
	void write() 
	{static} Token get(int)
}

class Turn {
	{static} final int NUMBER_PLAYERS = 2;
	- Player[] players;
	- int active;
	Turn(Board) 
	void play()
	- Player getPlayer()
	void writeWinner()
	Token getToken()
}

class UserPlayer extends Player {
	UserPlayer(Token, Board)
	~ Coordinate getCoordinate(Message message)
	~ Error checkPutCoordinateError(Coordinate) 
	~ Error checkMoveOriginCoordinateError(Coordinate)
	~ Error checkMoveTargetCoordinateError(Coordinate, Coordinate)
}

TicTacToe *-down-> Board
TicTacToe *-down-> Turn

Board .down.> Token
Turn .down.> Token
Player *-down-> Token
Turn *-down-> "2" Player
Board *-down-> Coordinate
Player <|-down- MachinePlayer
Coordinate .down.> Error
Player .down.> Error
Board .down.> Message
Player .down.> Message
TicTacToe .down.> Message
Turn .down.> Message

}

namespace usantatecla.utils {

class Coordinate {
	boolean isNull();
	Direction getDirection(Coordinate)
	boolean inHorizontal(Coordinate)
	boolean inVertical(Coordinate)
	boolean inMainDiagonal()
}

class ConcreteCoordinate {
	~ int row;
	~ int column;
	{static} {final} String ROW
	{static} {final}  String COLUMN
	~ ConcreteCoordinate() 
	~ ConcreteCoordinate(int, int) 
	+ boolean isNull()
	+ Direction getDirection(Coordinate)
	+ boolean inHorizontal(Coordinate) 
	+ boolean inVertical(Coordinate)
	+ boolean inMainDiagonal()
	~ void read(String)
	+ int getRow() 
	+ int getColumn()
	+ int hashCode()
	+ boolean equals(Object)
	+ String toString()
}
class NullCoordinate {
	+ {static} NullCoordinate instance
	+ {static} Coordinate instance()
	+ boolean isNull()
	+ Direction getDirection(Coordinate)
	+ boolean inHorizontal(Coordinate)
	+ boolean inVertical(Coordinate) 
	+ boolean inMainDiagonal()
	+ int hashCode()
	+ boolean equals(Object)
	+ String toString() 
}

enum Direction {
	VERTICAL
	HORIZONTAL
	MAIN_DIAGONAL
	INVERSE_DIAGONAL
	NULL_DIRECTION
}

class Console {
	+ static Console console
	+ static Console instance()
	- BufferedReader bufferedReader
	+ String readString(String) 
	+ String readString()
	+ int readInt(String)
	+ char readChar(String) 
	+ void writeln()
	+ void write(String) 
	+ void write(int)
	+ void writeln(String)
	+ void writeln(int) 
	+ void write(char)
	+ void writeError(String +) 
}

class ClosedInterval {
	- int min;
	- int max;
	+ ClosedInterval(int, int)
	+ boolean isIncluded(int)
	+ String toString() 
}

class YesNoDialog {
	- static final char AFFIRMATIVE
	- static final char NEGATIVE
	- static final String SUFFIX
	- static final String MESSAGE
	- char answer;
	+ boolean read(String message)
	- boolean isAfirmative()
	- char getAnswer()
	- boolean isNegative()
}

class LimitedIntDialog {
	- {final} ClosedInterval LIMITS
	- {static} {final} String ERROR_MESSAGE 
	+ LimitedIntDialog(int, int)
	+ int read(String)
}

Coordinate <|-down- ConcreteCoordinate
Coordinate <|-down- NullCoordinate

}

usantatecla.utils.ConcreteCoordinate <|-down- usantatecla.tictactoe.Coordinate

usantatecla.tictactoe.Coordinate .down.> usantatecla.utils.ClosedInterval
usantatecla.tictactoe.Token .down.> usantatecla.utils.ClosedInterval
usantatecla.utils.LimitedIntDialog .down.> usantatecla.utils.ClosedInterval


usantatecla.tictactoe.Error .down.> usantatecla.utils.Console
usantatecla.tictactoe.Message .down.> usantatecla.utils.Console
usantatecla.tictactoe.Token .down.> usantatecla.utils.Console
usantatecla.utils.ConcreteCoordinate .down.> usantatecla.utils.Console
usantatecla.utils.LimitedIntDialog .down.> usantatecla.utils.Console
usantatecla.utils.YesNoDialog .down.> usantatecla.utils.Console


usantatecla.tictactoe.Turn .down.> usantatecla.utils.LimitedIntDialog
usantatecla.tictactoe.TicTacToe .down.> usantatecla.utils.YesNoDialog

usantatecla.tictactoe.Board .down.> usantatecla.utils.Direction
usantatecla.tictactoe.Coordinate .down.> usantatecla.utils.Direction
usantatecla.utils.Coordinate .down.> usantatecla.utils.Direction

....

== Calidad del Software

=== Diseño

- [red]#_**Método largo**: Método "play" de TicTacToe,..._#

=== Rediseño

- _Nueva interfaz: Gráfica_
* [red]#_**Clases Grandes**: los Modelos asumen la responsabilidad y crecen en líneas, métodos, atributos, ... con cada nueva tecnología_#
* [red]#_**Alto acoplamiento**: los Modelos con cada nueva tecnología de interfaz (consola, gráficos, web, ...)_#
* [red]#_**Baja cohesión**: cada Modelo está gestionando sus atributos y las tecnologías de interfaz_#
* [red]#_**Open/Close**: hay que modificar los modelos que estaban funcionando previamente para escoger una tecnología de vista u otra (if's anidados)_#

- _Nuevas funcionalidades: undo/redo, demo, estadísiticas,..._
* [red]#_**Clases Grandes**: los Modelos asumen la responsabilidad y crecen en líneas, métodos, atributos, ... con las nuevas funcionalidades_#
* [red]#_**Open/Close**: hay que modificar los modelos que estaban funcionando previamente para incorporar nuevas funcionalidades_#

== Vista de Desarrollo/Implementación

[plantuml,diagramaImplementacion,svg]
....

package "  "  as tictactoe {
}
package "  "  as utils {
}
package "  "  as java.io {
}
package "  "  as java.util {
}

[mastermind.jar] as jar

jar *--> tictactoe
jar *--> utils
jar *--> java.io
jar *--> java.util
....


== Vista de Despliegue/Física

[plantuml,diagramaDespliegue,svg]
....

node node #DDDDDD [
<b>Personal Computer</b>
----
memory : xxx Mb
cpu : xxx GHz
]

[ tictactoe.jar ] as component

node *--> component
....

== Vista de Procesos

- No hay concurrencia
